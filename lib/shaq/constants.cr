module Shaq
  STANDARD = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"
  VALUES   = {Queen: 9, Rook: 5, Bishop: 3, Knight: 3, Pawn: 1}
  PIECES   = {K: King, Q: Queen, R: Rook, B: Bishop, N: Knight, P: Pawn}
  LETTERS  = PIECES.to_h.invert
  ROYAL    = {-9, -8, -7, -1, 1, 7, 8, 9}
  UCI      = /^([a-h][1-8]){2}[qnrb]?/

  BACK_RANKS = {Side::White => 1, Side::Black => 8}
  PAWN_RANKS = {Side::White => 2, Side::Black => 7}

  LONG_CASTLE = {
    Side::Black => {king: 2, path: 2..3, rook: {0, 3}},
    Side::White => {king: 58, path: 58..59, rook: {56, 59}},
  }
  SHORT_CASTLE = {
    Side::Black => {king: 6, path: 5..6, rook: {7, 5}},
    Side::White => {king: 62, path: 61..62, rook: {63, 61}},
  }

  MOORE_NEIGHBORHOODS = {% begin %} {
      {% for i in 0..63 %} [
        {% for j in ROYAL.map &.+ i %}
          {% if 0 <= j && j <= 63 && {-1, 0, 1}.includes? i % 8 - j % 8 %}
            {{j}}, {% end %} {% end %} ], {% end %} } {% end %}

  KNIGHT_VISION = {% begin %} {
      {% for i in 0..63 %} [
        {% for j in {-17, -15, -10, -6, 6, 10, 15, 17}.map &.+ i %}
          {% if 0 <= j && j <= 63 && {-2, -1, 1, 2}.includes? i % 8 - j % 8 %}
            {{j}}, {% end %} {% end %} ], {% end %} } {% end %}

  PAWN_VISION = {
    Side::Black => {
      [0], [0], [0], [0], [0], [0], [0], [0],
      [17], [16, 18], [17, 19], [18, 20], [19, 21], [20, 22], [21, 23], [22],
      [25], [24, 26], [25, 27], [26, 28], [27, 29], [28, 30], [29, 31], [30],
      [33], [32, 34], [33, 35], [34, 36], [35, 37], [36, 38], [37, 39], [38],
      [41], [40, 42], [41, 43], [42, 44], [43, 45], [44, 46], [45, 47], [46],
      [49], [48, 50], [49, 51], [50, 52], [51, 53], [52, 54], [53, 55], [54],
      [57], [56, 58], [57, 59], [58, 60], [59, 61], [60, 62], [61, 63], [62],
    },
    Side::White => {
      [0], [0], [0], [0], [0], [0], [0], [0],
      [1], [0, 2], [1, 3], [2, 4], [3, 5], [4, 6], [5, 7], [6],
      [9], [8, 10], [9, 11], [10, 12], [11, 13], [12, 14], [13, 15], [14],
      [17], [16, 18], [17, 19], [18, 20], [19, 21], [20, 22], [21, 23], [22],
      [25], [24, 26], [25, 27], [26, 28], [27, 29], [28, 30], [29, 31], [30],
      [33], [32, 34], [33, 35], [34, 36], [35, 37], [36, 38], [37, 39], [38],
      [41], [40, 42], [41, 43], [42, 44], [43, 45], [44, 46], [45, 47], [46],
      [0], [0], [0], [0], [0], [0], [0], [0],
    },
  }
end
